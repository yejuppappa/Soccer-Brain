# âš½ Soccer Brain - ë°°ë‹¹ ìˆ˜ì§‘ (3ì‹œê°„ ê°„ê²©)

name: ğŸ’° Odds Tracking

on:
  schedule:
    - cron: "0 */3 * * *"    # ë§¤ 3ì‹œê°„ (00, 03, 06, 09, 12, 15, 18, 21 UTC)

  workflow_dispatch:

concurrency:
  group: odds-tracking
  cancel-in-progress: true

jobs:
  odds:
    runs-on: ubuntu-latest
    timeout-minutes: 30

    steps:
      - name: ğŸ“¥ ì½”ë“œ ì²´í¬ì•„ì›ƒ
        uses: actions/checkout@v4

      - name: ğŸŸ¢ Node.js ì„¤ì •
        uses: actions/setup-node@v4
        with:
          node-version: "20"
          cache: "npm"

      - name: ğŸ“¦ ì˜ì¡´ì„± ì„¤ì¹˜
        run: npm install --ignore-scripts

      - name: ğŸ”§ Prisma ìƒì„±
        run: npx prisma generate

      - name: ğŸ’° ë°°ë‹¹ ìˆ˜ì§‘
        run: npx tsx scripts/collect.ts odds
        env:
          DATABASE_URL: ${{ secrets.DATABASE_URL }}
          API_SPORTS_KEY: ${{ secrets.API_SPORTS_KEY }}
